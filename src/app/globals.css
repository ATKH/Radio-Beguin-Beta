/* Import des polices Google */
@import url('https://fonts.googleapis.com/css2?family=Figtree:wght@400;500;700&family=Zilla+Slab:wght@400;700&display=swap');
@import "tailwindcss";
@import "tw-animate-css";

/* Couleurs principales */
:root {
  --primary: #111111;
  --primary-hover: #1f1f1f;
  --primary-foreground: #f5f5f5;
  --foreground: #0a0a0a;
  --foreground-strong: #060607;
  --muted-foreground: #4f4f59;
  --background: #ffffff;
  --border: rgba(109, 40, 217, 0.25);
  --muted: rgba(109, 40, 217, 0.08);
  --white: #ffffff;
  --range-bg: rgba(109, 40, 217, 0.2);
  --ticker-highlight: rgba(255, 255, 255, 0.45);
  --schedule-highlight: #111111;
  --schedule-highlight-glow: rgba(17, 17, 17, 0.25);
}

.theme-light {
  --primary: #111111;
  --primary-hover: #1f1f1f;
  --primary-foreground: #f5f5f5;
  --foreground: #0a0a0a;
  --foreground-strong: #060607;
  --muted-foreground: #4f4f59;
  --background: #ffffff;
  --border: rgba(109, 40, 217, 0.25);
  --muted: rgba(109, 40, 217, 0.08);
  --white: #ffffff;
  --range-bg: rgba(109, 40, 217, 0.2);
  --ticker-highlight: rgba(255, 255, 255, 0.45);
  --schedule-highlight: #111111;
  --schedule-highlight-glow: rgba(17, 17, 17, 0.25);
}

.theme-dark {
  --primary: #f5f5f5;
  --primary-hover: #e1e1e1;
  --primary-foreground: #080808;
  --foreground: #f9f9f9;
  --foreground-strong: #f4f4f5;
  --muted-foreground: #a1a1aa;
  --background: #050505;
  --border: rgba(255, 255, 255, 0.15);
  --muted: rgba(255, 255, 255, 0.08);
  --white: #080808;
  --range-bg: rgba(255, 255, 255, 0.25);
  --ticker-highlight: rgba(111, 255, 233, 0.28);
  --schedule-highlight: #f5f5f5;
  --schedule-highlight-glow: rgba(245, 245, 245, 0.35);
}

/* Styles globaux */
@layer base {
  body {
    @apply bg-[var(--background)] text-[var(--foreground-strong)] font-sans;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    font-smoothing: antialiased;
  }

  p,
  li,
  span {
    color: var(--foreground);
  }

  .animated-backdrop {
    display: none;
  }

  .ticker-gradient {
    position: relative;
    overflow: hidden;
    isolation: isolate;
  }

  .ticker-gradient::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: -1;
    background: linear-gradient(
      90deg,
      var(--ticker-from, rgba(255, 214, 242, 0.9)) 0%,
      var(--ticker-mid, rgba(200, 199, 255, 0.92)) 33%,
      var(--ticker-to, rgba(179, 244, 255, 0.9)) 66%,
      var(--ticker-end, rgba(220, 255, 240, 0.92)) 100%
    );
    animation: tickerHue 24s ease-in-out infinite alternate;
  }

  .ticker-gradient::after {
    content: "";
    position: absolute;
    inset: 0;
    z-index: -2;
    background: radial-gradient(ellipse at center, var(--ticker-highlight, rgba(255, 255, 255, 0.55)), transparent 70%);
    mix-blend-mode: screen;
  }

  .animated-backdrop__blob {
    position: absolute;
    width: 52vmin;
    height: 52vmin;
    border-radius: 44% 56% 48% 52% / 54% 46% 56% 44%;
    background-repeat: no-repeat;
    background-size: 120% 120%, 130% 130%;
    background-position: center;
    mix-blend-mode: screen;
    filter: blur(18px) saturate(135%);
    animation: cloudFloat 26s ease-in-out infinite alternate, hueShift 30s ease-in-out infinite alternate;
  }

  .animated-backdrop__blob.blob--strong {
    opacity: 0.38;
  }

  .animated-backdrop__blob.blob--medium {
    opacity: 0.28;
  }

  .animated-backdrop__blob.blob--soft {
    opacity: 0.2;
  }

  .animated-backdrop__blob.blob--sunset {
    top: -12vmin;
    left: -14vmin;
    background-image:
      radial-gradient(ellipse at 30% 30%, rgba(255, 194, 143, 0.72), transparent 62%),
      radial-gradient(ellipse at 72% 68%, rgba(255, 140, 225, 0.6), transparent 68%);
    animation-duration: 28s, 24s;
    animation-delay: -4s;
  }

  .animated-backdrop__blob.blob--aurora {
    top: 18vmin;
    right: -14vmin;
    width: 48vmin;
    height: 48vmin;
    background-image:
      radial-gradient(ellipse at 58% 28%, rgba(112, 190, 255, 0.68), transparent 66%),
      radial-gradient(ellipse at 32% 76%, rgba(186, 162, 255, 0.55), transparent 70%);
    animation-duration: 32s, 28s;
    animation-delay: -12s;
  }

  .animated-backdrop__blob.blob--sherbet {
    bottom: -16vmin;
    left: 22vmin;
    width: 46vmin;
    height: 46vmin;
    background-image:
      radial-gradient(ellipse at 44% 68%, rgba(255, 148, 210, 0.6), transparent 64%),
      radial-gradient(ellipse at 72% 32%, rgba(255, 208, 136, 0.5), transparent 68%);
    animation-duration: 34s, 30s;
    animation-delay: -18s;
  }

  .animated-backdrop__blob.blob--violet {
    top: 46vmin;
    left: -8vmin;
    width: 40vmin;
    height: 40vmin;
    background-image:
      radial-gradient(ellipse at 30% 38%, rgba(146, 102, 255, 0.6), transparent 62%),
      radial-gradient(ellipse at 70% 62%, rgba(255, 220, 255, 0.48), transparent 68%);
    animation-duration: 36s, 32s;
    animation-delay: -26s;
  }

  @keyframes cloudFloat {
    0% {
      transform: translate3d(0, 0, 0) scale(1);
    }
    50% {
      transform: translate3d(3vmin, 2vmin, 0) scale(1.08);
    }
    100% {
      transform: translate3d(-2vmin, 3vmin, 0) scale(0.94);
    }
  }

  @keyframes hueShift {
    0% {
      filter: blur(18px) saturate(132%) hue-rotate(-10deg);
    }
    50% {
      filter: blur(18px) saturate(150%) hue-rotate(28deg);
    }
    100% {
      filter: blur(18px) saturate(132%) hue-rotate(-16deg);
    }
  }

  @keyframes tickerHue {
    0% {
      filter: hue-rotate(0deg) saturate(110%);
    }
    50% {
      filter: hue-rotate(20deg) saturate(140%);
    }
    100% {
      filter: hue-rotate(-18deg) saturate(110%);
    }
  }

  .theme-dark .animated-backdrop__blob {
    opacity: 0.3;
    mix-blend-mode: lighten;
  }


  h1,h2,h3,h4,h5,h6 {
    @apply font-serif font-bold;
    color: var(--foreground);
  }

  strong {
    color: var(--foreground-strong);
  }

  .text-muted-foreground,
  [data-muted="true"] {
    color: var(--muted-foreground);
  }

  a {
    @apply font-semibold no-underline transition-opacity duration-200;
    color: var(--primary);
  }

  a:hover {
    opacity: 0.8;
  }

  .section {
    @apply border-t border-[var(--primary)]/40 pt-8 pb-8;
  }

  .card, button, input, select, textarea {
    @apply bg-[var(--white)] text-[var(--foreground)] border border-[var(--primary)]/30 rounded-xl transition-all duration-200;
  }

  button:hover, input:hover, select:hover, textarea:hover {
    @apply text-[var(--primary-hover)] border-[var(--primary-hover)];
  }
}

@layer components {
  .tag-pill {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 9999px;
    border: 1px solid var(--primary);
    background-color: var(--white);
    color: var(--foreground-strong);
    font-weight: 500;
    line-height: 1;
    box-shadow: 0 1px 3px rgba(15, 23, 42, 0.06);
    transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
    white-space: nowrap;
  }

  @media (hover: hover) and (pointer: fine) {
    .tag-pill:hover {
      background-color: var(--primary);
      color: var(--primary-foreground);
      border-color: var(--primary);
      box-shadow: 0 2px 6px rgba(15, 23, 42, 0.14);
    }
  }

  .tag-pill.active {
    background-color: var(--primary);
    color: #ffffff;
    border-color: var(--primary);
  }

  .tag-pill-xs {
    padding: 0.16rem 0.52rem;
    font-size: 0.62rem;
    letter-spacing: 0.008em;
  }

  .tag-pill-sm {
    padding: 0.3rem 0.75rem;
    font-size: 0.75rem;
  }

  .mood-dot {
    position: relative;
    overflow: hidden;
  }

  .mood-dot::before,
  .mood-dot::after {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    pointer-events: none;
  }

  .mood-dot::before,
  .mood-dot::after {
    content: none;
  }

  .mood-label {
    font-weight: 500;
    color: var(--foreground);
  }

  .mood-icon {
    display: block;
    transition: filter 0.3s ease-in-out;
  }

  .theme-dark .mood-icon {
    filter: brightness(1.4) contrast(1.3)
      drop-shadow(0 0 1.5px rgba(255, 255, 255, 0.85))
      drop-shadow(0 0 4px rgba(255, 255, 255, 0.55));
  }

  .theme-dark .mood-icon.mood-icon--active {
    filter: brightness(1.55) contrast(1.35)
      drop-shadow(0 0 2px rgba(255, 255, 255, 0.9))
      drop-shadow(0 0 6px rgba(255, 255, 255, 0.6));
  }

}


/* Barre de progression du player */
input[type="range"].soundcloud-range {
  -webkit-appearance: none;
  width: 100%;
  height: 6px;
  background: var(--range-bg);
  border-radius: 2px;
  outline: none;
}

input[type="range"].soundcloud-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 18px;
  height: 18px;
  background: var(--primary);
  border-radius: 50%;
  cursor: pointer;
  margin-top: -6px;
}

input[type="range"].soundcloud-range::-moz-range-thumb {
  width: 18px;
  height: 18px;
  background: var(--primary);
  border-radius: 50%;
  cursor: pointer;
  border: none;
}

input[type="range"].soundcloud-range::-ms-thumb {
  width: 18px;
  height: 18px;
  background: var(--primary);
  border-radius: 50%;
  cursor: pointer;
  border: none;
}

/* Curseur cœur pour tous les éléments cliquables */
a, button, [role="button"], .clickable {
  cursor: pointer;
}

.podcast-card-overlay {
  opacity: 1;
}

@media (hover: hover) and (pointer: fine) {
  .group .podcast-card-overlay {
    opacity: 0;
  }

  .group:hover .podcast-card-overlay,
  .group:focus-within .podcast-card-overlay {
    opacity: 1;
  }
}
/* ---- Podcast artwork : effet affiche sérigraphie (noir&blanc + grain + trame) ---- */

.podcast-artwork-wrapper {
  position: relative;
  overflow: hidden;       /* nécessaire pour arrondir correctement */
  border-radius: inherit; /* hérite des arrondis du parent */
  display: block;
}

/* cible l'img générée par next/image à l'intérieur du wrapper */
.podcast-artwork-wrapper img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: grayscale(100%) contrast(1.45) brightness(0.95);
  transform-origin: center;
}

/* couche de bruit (grain irrégulier) */
.podcast-artwork-wrapper::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  mix-blend-mode: multiply; /* effet encre sombre */
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='400' height='400'><filter id='n'><feTurbulence baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/></filter><rect width='100%' height='100%' filter='url(%23n)' fill='%23ffffff' /></svg>");
  background-repeat: repeat;
  opacity: 0.30; /* intensité du grain : 0.25-0.45 selon goût */
  border-radius: inherit;
}

/* couche de trame (points réguliers) pour l'effet sérigraphie/demi-teinte */
.podcast-artwork-wrapper::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  mix-blend-mode: overlay; /* change le rendu de la trame, essayer multiply/overlay */
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 10 10'><rect width='10' height='10' fill='%23ffffff'/><circle cx='5' cy='5' r='1.5' fill='%23000000'/></svg>");
  background-repeat: repeat;
  background-size: 10px 10px; /* taille des points */
  opacity: 0.12; /* intensité de la trame : ajuster 0.08 - 0.18 */
  border-radius: inherit;
}

/* fallback : si tu veux forcer toutes les images dans les .card à recevoir le style */
.card img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: grayscale(100%) contrast(1.35) brightness(0.95);
}

/* petit util pour debugging (retire ensuite) */
/* .podcast-artwork-wrapper { outline: 1px dashed rgba(255,0,128,0.25); } */

/* Harmonisation des anciennes classes Tailwind en violet */
.text-pink-500 {
  color: var(--primary) !important;
}

.text-pink-600,
.hover\:text-pink-500:hover,
.hover\:text-pink-600:hover {
  color: var(--primary-hover) !important;
}

.bg-pink-500 {
  background-color: var(--primary) !important;
}

.bg-pink-600,
.hover\:bg-pink-500:hover,
.hover\:bg-pink-600:hover {
  background-color: var(--primary-hover) !important;
}

.border-pink-500 {
  border-color: var(--primary) !important;
}

.ticker-track {
  overflow: hidden;
  position: relative;
}

.ticker-text {
  display: inline-flex;
  align-items: center;
  gap: 0;
  white-space: nowrap;
  animation: ticker-scroll 52s linear infinite;
}

.ticker-segment {
  display: inline-flex;
  align-items: center;
  gap: 1.25rem;
}

.ticker-monkey-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  margin: 0;
  border: none;
  background: transparent;
  cursor: pointer;
  color: inherit;
}

.ticker-monkey-button:focus-visible {
  outline: 2px solid currentColor;
  outline-offset: 4px;
}

.ticker-monkey {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex: 0 0 auto;
  width: 36px;
  height: 36px;
  margin-left: 1.5rem;
}

.ticker-monkey__image {
  width: 100%;
  height: 100%;
  object-fit: contain;
  image-rendering: auto;
}

.ticker-separator {
  display: inline-flex;
  align-items: center;
  padding: 0 1rem 0 0.5rem;
  transform: translateY(-1px);
}

.animate-monkey-step {
  animation: monkey-step 0.85s ease-in-out infinite;
}

@keyframes ticker-scroll {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-100%);
  }
}

@keyframes monkey-step {
  0%, 100% {
    transform: translateY(0) rotate(0deg);
  }
  25% {
    transform: translateY(-3px) rotate(-4deg);
  }
  50% {
    transform: translateY(1px) rotate(3deg);
  }
  75% {
    transform: translateY(-2px) rotate(-2deg);
  }
}
@keyframes wizz {
  0%, 100% { transform: rotate(0deg) scale(1); }
  20% { transform: rotate(-10deg) scale(1.1); }
  40% { transform: rotate(10deg) scale(1.1); }
  60% { transform: rotate(-6deg) scale(1.05); }
  80% { transform: rotate(6deg) scale(1.05); }
}
/* === 🐒 Animation Singe Béguin === */
@keyframes bounce-once {
  0%, 100% { transform: translate(0, 0) rotate(0deg); }
  20% { transform: translateY(-6px) rotate(-2deg); }
  40% { transform: translateX(3px) rotate(2deg); }
  60% { transform: translateY(3px) rotate(-1deg); }
  80% { transform: translateX(-2px) rotate(1deg); }
}

.animate-bounce-once {
  animation: bounce-once 0.6s ease-in-out;
}

button.singe-beguin {
  border: none;
  background: transparent;
  padding: 0;
  cursor: pointer;
  outline: none;
  box-shadow: none;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 42px;
  height: 42px;
  flex: 0 0 auto;
  position: relative;
  border-radius: 999px;
}

button.singe-beguin:focus-visible {
  outline: none !important;
  box-shadow: none !important;
}

.singe-beguin img {
  width: 42px;
  height: 42px;
  object-fit: contain;
  flex: 0 0 auto;
  filter: grayscale(1) contrast(1.3) brightness(0.8);
  transition: all 0.3s ease-in-out;
}

.singe-beguin.active img {
  filter: none;
  transform: scale(1.1);
}
button.singe-beguin:disabled {
  cursor: not-allowed;
  opacity: 0.6;
}

button.singe-beguin:disabled img {
  filter: grayscale(0.7) contrast(0.9) brightness(0.75);
  transform: none !important;
}

.theme-dark button.singe-beguin {
  padding: 0;
  border: none;
}

.theme-dark .singe-beguin img {
  filter: brightness(1.4) contrast(1.3)
    drop-shadow(0 0 1.5px rgba(255, 255, 255, 0.85))
    drop-shadow(0 0 4px rgba(255, 255, 255, 0.55));
}

.theme-dark .singe-beguin.active img {
  filter: brightness(1.55) contrast(1.35)
    drop-shadow(0 0 2px rgba(255, 255, 255, 0.9))
    drop-shadow(0 0 6px rgba(255, 255, 255, 0.6));
}

.schedule-highlight {
  color: var(--schedule-highlight);
}

/* --- Animation du singe qui court --- */
@keyframes monkey-run {
  0%, 100% {
    transform: translateY(0) rotate(0deg);
  }
  10% {
    transform: translateY(-2px) rotate(-5deg);
  }
  20% {
    transform: translateY(1px) rotate(5deg);
  }
  30% {
    transform: translateY(-2px) rotate(-3deg);
  }
  50% {
    transform: translateY(0) rotate(0deg);
  }
}

.animate-monkey-run {
  animation: monkey-run 0.8s ease-in-out infinite;
}
/* --- Animation du texte défilant --- */
@keyframes ticker {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}
.animate-ticker {
  animation: ticker 30s linear infinite;
}
/* --- Texte défilant plus rapide et fluide --- */
@keyframes ticker-fast {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-100%);
  }
}

.animate-ticker-fast {
  display: inline-block;
  white-space: nowrap;
  animation: ticker-fast 18s linear infinite;
}

/* --- Singe Béguin qui court sous le texte --- */
@keyframes monkey-slide {
  0% {
    left: -100px;
    transform: scaleX(1) translateY(0);
  }
  25% {
    transform: scaleX(1) translateY(-2px);
  }
  50% {
    left: calc(100% + 100px);
    transform: scaleX(-1) translateY(0);
  }
  75% {
    transform: scaleX(-1) translateY(-2px);
  }
  100% {
    left: -100px;
    transform: scaleX(1) translateY(0);
  }
}

.animate-monkey-slide {
  animation: monkey-slide 12s linear infinite;
}
/* 🐒 Animation du singe Béguin sur le bandeau news */
@keyframes monkey-run {
  0% {
    left: -80px;
    transform: scaleX(1) translateY(0);
  }
  10% {
    transform: scaleX(1) translateY(-3px);
  }
  20% {
    transform: scaleX(1) translateY(0);
  }
  50% {
    left: 100%;
    transform: scaleX(-1) translateY(0);
  }
  60% {
    transform: scaleX(-1) translateY(-3px);
  }
  70% {
    transform: scaleX(-1) translateY(0);
  }
  100% {
    left: -80px;
    transform: scaleX(1) translateY(0);
  }
}

.animate-monkey-run {
  animation: monkey-run 18s linear infinite;
}
